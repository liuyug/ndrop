# canvas.before:
#     Color:
#         rgba: 1, 0, 0, 1
#     Line:
#         rectangle: self.x, self.y, self.width, self.height

#:import join os.path.join
#:set default_height '30dp'
#:set label_font_size '14sp'
<GUIProgressBar>:
<CheckLabelBox>:
    active: True
    text: 'checkbox'
    spacing: sp(5)
    MDCheckbox:
        id: cb
        active: root.active
        size_hint: None, 1
        width: '20dp'
        on_active: root.on_checkbox_active(cb)
    MDTextButton:
        text: root.text
        pos_hint: {'center_x':.5, 'center_y': .5}
        on_press: cb._do_press()
<SendWidget>:
    orientation: "vertical"
    padding: sp(5), sp(5)
    spacing: sp(5)
    MDTextField:
        id: ip
        hint_text: "IP"
        on_text: root.on_input_text(self, 'ip')
    MDBoxLayout:
        spacing: sp(5)
        size_hint_y: None
        height: default_height
        MDLabel:
            text: 'Mode:'
            size_hint_x: None
            width: sp(50)
        MDCheckbox:
            id: dukto
            text: 'dukto'
            active: True
            group: 'mode'
            size_hint_x: None
            width: sp(20)
            on_active: root.on_checkbox_active(self, 'dukto')
        MDTextButton:
            text: 'Dukto'
            pos_hint: {'center_x':.5, 'center_y': .5}
            on_press: dukto._do_press()
        MDCheckbox:
            id: nitroshare
            text: 'nitroshare'
            group: 'mode'
            size_hint_x: None
            width: sp(20)
            on_active: root.on_checkbox_active(self, 'nitroshare')
        MDTextButton:
            text: 'NitroShare'
            pos_hint: {'center_x':.5, 'center_y': .5}
            on_press: nitroshare._do_press()
    MDTextField:
        id: message
        multiline: True
        hint_text: "Message"
        size_hint: 1, 1
        on_text: root.on_input_text(self, 'message')
    MDRectangleFlatButton:
        id: send_text
        text: 'Send TEXT'
        size_hint_x: 1
        on_press: root.on_send_text()
    MDRectangleFlatButton:
        id: send_files
        size_hint_x: 1
        text: 'Send Files'
        on_press: root.on_send_files()
    MDRectangleFlatButton:
        size_hint_x: 1
        text: 'Cancel'
        on_press: root.dismiss()
<ClientWidget>:
    md_bg_color: 1, 1, 1, 1
    size_hint_y: None
    height: sp(72)
    padding: sp(4)
    texture: None
    source: None
    user: ''
    name: ''
    message: ''
    Image:
        texture: root.texture
        source: root.source
        allow_stretch: True
        size_hint: None, None
        size: sp(64), sp(64)
        pos_hint: {'center_x':.5, 'center_y': .5}
    MDBoxLayout:
        orientation: 'vertical'
        padding: sp(5), sp(2)
        MDLabel:
            font_size: label_font_size
            text: root.user
            shorten: True
        MDLabel:
            font_size: label_font_size
            text: root.name
            shorten: True
        MDLabel:
            font_size: label_font_size
            text: root.message
            shorten: True
        GUIProgressBar:
            id: progress
<RootWidget>:
    orientation: 'vertical'
    md_bg_color: 0.9, 0.9, 0.9, 1
    MDToolbar:
        title: "NDrop - File Transfer Tool"
        specific_text_color: 1, 1, 1, 1
        md_bg_color: app.theme_cls.primary_color
    MDBoxLayout:
        orientation: 'vertical'
        size_hint_y: None
        height: self.minimum_height
        padding: sp(5)
        ClientWidget:
            id: you
            user: 'You'
            name: 'localhost'
            message: 'ready'
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        MDBoxLayout:
            id: scroll_layout
            orientation: 'vertical'
            padding: sp(5)
            spacing: sp(5)
            size_hint_y: None
            height: self.minimum_height
            ClientWidget:
                id: ip
                user: 'IP Connection'
                name: '@send data'
                message: 'ready'
    MDBoxLayout:
        md_bg_color: app.theme_cls.primary_dark
        size_hint_y: None
        height: sp(60)
        MDBoxLayout:
        MDIconButton:
            id: open_folder
            icon: join(app.image_dir, 'OpenFolderIcon.png')
            icon_size: sp(40), sp(40)
            pos_hint: {'center_x':.5, 'center_y': .5}
            on_press: root.open_folder()
        MDBoxLayout:
        MDIconButton:
            id: config
            icon: join(app.image_dir, 'ConfigIcon.png')
            icon_size: sp(40), sp(40)
            pos_hint: {'center_x':.5, 'center_y': .5}
            on_press: root.show_config()
        MDBoxLayout:
        MDIconButton:
            id: hfs
            icon: join(app.image_dir, 'hfs.png')
            icon_size: sp(40), sp(40)
            pos_hint: {'center_x':.5, 'center_y': .5}
            on_press: root.show_hfs()
        MDBoxLayout:
<ConfigWidget>:
    orientation: 'vertical'
    padding: sp(5)
    spacing: sp(5)
    MDLabel:
        text: 'Saved Folder:'
        size_hint: 1, None
        height: default_height
        font_size: label_font_size
    MDTextField:
        id: target_dir
        size_hint: 1, None
        height: default_height
        font_size: label_font_size
    MDBoxLayout:
        size_hint: 1, None
        height: default_height
        MDBoxLayout:
        MDRectangleFlatButton:
            text: 'Change Folder'
            on_press: root.on_change_folder()
    CheckLabelBox:
        id: create_node_by_text
        text: 'Create node by recving TEXT'
        active: True
        size_hint: 1, None
        height: default_height
    BoxLayout:
    BoxLayout:
        size_hint: 1, None
        height: default_height
        spacing: sp(5)
        BoxLayout:
        MDRectangleFlatButton:
            text: 'OK'
            on_release: root.on_ok()
        MDRectangleFlatButton:
            text: 'Cancel'
            on_release: root.on_cancel()
        BoxLayout:
<MessageWidget>:
    orientation: 'vertical'
    padding: sp(5)
    spacing: sp(5)
    MDTextField:
        id: log
        font_size: '12sp'
        size_hint: 1, 1
        do_wrap: False
        multiline: True
        readonly: True
    MDRectangleFlatButton:
        text: 'OK'
        size_hint_y: None
        height: default_height
        pos_hint: {'center_x':.5, 'center_y': .5}
        on_release: root.on_ok()
<HFSWidget>:
    orientation: 'vertical'
    padding: sp(5)
    spacing: sp(5)
    MDTextField:
        id: log
        font_size: '12sp'
        multiline: True
        size_hint: 1, 1
        do_wrap: False
        readonly: True
    MDRectangleFlatButton:
        text: 'OK'
        size_hint_y: None
        height: default_height
        pos_hint: {'center_x':.5, 'center_y': .5}
        on_release: root.on_ok()
